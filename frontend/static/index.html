<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Autonomous Supply Chain Control Tower</title>
    <meta name="theme-color" content="#08090A">
    
    <link rel="stylesheet" href="/static/styles.css">
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>
<body x-data="appState()">
    
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         STICKY RESULTS BAR (builds up as data arrives)
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="results-header" :class="{'visible': visionResult !== null}">
        <div class="results-header-content">
            <div class="result-item">
                <span class="result-label">Count</span>
                <span class="result-value highlight" x-text="visionResult?.item_count || '‚Äî'"></span>
            </div>
            <div class="result-item">
                <span class="result-label">Type</span>
                <span class="result-value" x-text="visionResult?.item_type || '‚Äî'"></span>
            </div>
            <div class="result-item">
                <span class="result-label">Confidence</span>
                <span class="result-value" x-text="visionResult?.confidence || '‚Äî'"></span>
            </div>
            <div class="result-item" x-show="supplierResult">
                <span class="result-label">Supplier</span>
                <span class="result-value" x-text="supplierResult?.supplier || '‚Äî'"></span>
            </div>
            <div class="result-item" x-show="orderResult">
                <span class="result-label">Order</span>
                <span class="result-value" style="color: var(--green);" x-text="orderResult?.orderId || '‚Äî'"></span>
            </div>
        </div>
        <button @click="resetUpload()" class="btn btn-sm" style="background: var(--surface-3); color: var(--text-80);">
            New Analysis
        </button>
    </div>
    
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         HEADER
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <header :style="visionResult ? 'padding-top: 3.5rem;' : ''">
        <h1 class="hero-title">Autonomous Supply Chain Control Tower</h1>
        <p class="hero-subtitle">Gemini 3 Flash ¬∑ AlloyDB AI ¬∑ A2A Protocol</p>
        
        <!-- Fixed controls -->
        <div style="position: fixed; top: 1rem; right: 1.5rem; display: flex; gap: 0.75rem; z-index: 1000;">
            <button @click="toggleAudio()" class="mute-toggle no-print" :title="audioEnabled ? 'Mute' : 'Unmute'">
                <span x-show="audioEnabled">üîä</span>
                <span x-show="!audioEnabled">üîá</span>
            </button>
            <div class="connection-status no-print">
                <div class="connection-dot" :class="wsConnected ? 'connected' : 'disconnected'"></div>
                <span x-text="wsConnected ? 'Live' : 'Offline'"></span>
            </div>
        </div>
    </header>
    
    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         MAIN CONTENT AREA
         ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="app-container">
        
        <!-- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
             MAIN CARD (center column)
             ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
        <div class="main-glass-card">
        
            <!-- ACT 1: UPLOAD ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
            <section class="act act-upload" :class="{ 'active': step === 0 }" x-show="step === 0">
                
                <div class="upload-hero">
                    <h2 class="upload-title">Analyze Your Warehouse</h2>
                    <p class="upload-instructions">Upload a shelf image to count inventory, match suppliers, and place orders ‚Äî all autonomously powered by AI agents.</p>
                </div>
                
                <!-- Drop zone -->
                <div class="upload-area"
                     :class="{'drag-over': isDragging}"
                     @dragover.prevent="isDragging = true"
                     @dragleave.prevent="isDragging = false"
                     @drop.prevent="handleDrop($event)">
                    
                    <template x-if="!uploadedImage">
                        <div>
                            <svg style="margin: 0 auto; width: 3rem; height: 3rem; color: var(--text-20);" stroke="currentColor" fill="none" viewBox="0 0 48 48">
                                <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                            <div style="margin-top: 1rem;">
                                <label for="file-upload" style="cursor: pointer;">
                                    <span style="font-size: 0.9rem; color: var(--text-60);">
                                        <span style="font-weight: 600; color: var(--blue);">Upload a file</span>
                                        or drag and drop
                                    </span>
                                    <p style="font-size: 0.75rem; color: var(--text-20); margin-top: 0.5rem; font-family: var(--font-mono);">PNG, JPG, JPEG up to 10MB</p>
                                </label>
                                <input id="file-upload" type="file" style="display: none;" accept="image/*" @change="handleFileSelect($event)">
                            </div>
                        </div>
                    </template>
                    
                    <template x-if="uploadedImage">
                        <div style="position: relative;">
                            <img :src="uploadedImage" alt="Uploaded warehouse image">
                            <button @click="resetUpload()" style="position: absolute; top: 0.5rem; right: 0.5rem; background: rgba(0,0,0,0.7); color: white; border-radius: 50%; width: 32px; height: 32px; border: 1px solid rgba(255,255,255,0.1); cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 200ms ease;">
                                <svg style="width: 1rem; height: 1rem;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                            </button>
                        </div>
                    </template>
                </div>
                
                <!-- Start button -->
                <div class="text-center" style="margin-top: var(--space-6);">
                    <button @click="startAnalysis()" 
                            :disabled="!uploadedImage || isProcessing"
                            class="btn btn-primary btn-lg">
                        <template x-if="!isProcessing">
                            <span>Initiate Autonomous Workflow</span>
                        </template>
                        <template x-if="isProcessing">
                            <span style="display: flex; align-items: center; gap: 0.5rem;">
                                <span class="spinner"></span>
                                Processing‚Ä¶
                            </span>
                        </template>
                    </button>
                </div>
                
                <!-- Sample images -->
                <div x-show="sampleImages.length > 0 && !uploadedImage" class="samples-section">
                    <div class="samples-header">
                        <span class="samples-label">Or try a sample</span>
                        <div class="samples-line"></div>
                    </div>
                    <div class="samples-grid">
                        <template x-for="img in sampleImages" :key="img.name">
                            <div class="sample-card" @click="selectSampleImage(img.name)">
                                <img :src="`/api/test-image/${img.name}`" :alt="img.name">
                                <div class="sample-overlay">
                                    <span class="sample-action">Analyze ‚Üí</span>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>
                
            </section>
            
            <!-- ACT 2: VISION ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
            <section class="act act-vision" :class="{ 'active': step === 1 }" x-show="step === 1">
                <div class="image-stage">
                    <img :src="uploadedImage" alt="Analyzing‚Ä¶">
                    
                    <!-- Scan line -->
                    <div class="scan-overlay" x-show="!visionResult">
                        <div class="scan-line"></div>
                    </div>
                    
                    <!-- Thought stream -->
                    <div class="thought-overlay" x-show="currentThought && !visionResult">
                        <span class="thought-text" x-text="currentThought"></span>
                        <span class="thought-cursor"></span>
                    </div>
                    
                    <!-- Result badge -->
                    <div x-show="visionResult" class="result-container">
                        <div class="count-badge">
                            <div class="badge-indicator" :class="{'confirmed': visionResult?.hasCodeExecution, 'estimated': !visionResult?.hasCodeExecution}">
                                <span x-show="visionResult?.hasCodeExecution">‚úì</span>
                                <span x-show="!visionResult?.hasCodeExecution">~</span>
                            </div>
                            <div class="badge-content">
                                <div class="badge-count" x-text="visionResult ? `${visionResult.item_count} ${visionResult.item_type}` : ''"></div>
                                <div class="badge-label" x-text="visionResult?.hasCodeExecution ? 'Code-Verified' : 'Estimated'"></div>
                            </div>
                        </div>
                        <div class="count-summary" x-text="visionResult ? visionResult.summary : ''"></div>
                    </div>
                </div>
            </section>
            
            <!-- ACT 3: SUPPLIER MATCH ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
            <section class="act act-memory" :class="{ 'active': step === 2 }" x-show="step === 2">
                <div class="split-view">
                    <!-- Thumbnail -->
                    <div class="image-thumbnail">
                        <img :src="uploadedImage" alt="Analyzed image">
                        <div style="margin-top: 0.75rem; text-align: center;">
                            <div style="font-size: 1.1rem; font-weight: 700; color: var(--text-100);" x-text="visionResult ? `${visionResult.item_count} ${visionResult.item_type}` : ''"></div>
                            <div class="search-label" x-show="visionResult">
                                Querying: <strong x-text="visionResult ? visionResult.search_query : ''"></strong>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Map -->
                    <div class="map-container">
                        <svg class="map-svg" viewBox="0 0 1000 500" xmlns="http://www.w3.org/2000/svg">
                            <path d="M100,80 L180,70 L250,90 L280,140 L260,180 L220,200 L180,190 L140,160 L120,120 Z"/>
                            <path d="M240,250 L260,240 L280,260 L290,300 L280,360 L260,400 L240,420 L220,400 L210,360 L220,300 Z"/>
                            <path d="M480,100 L520,90 L560,110 L580,140 L560,170 L520,180 L480,170 L460,140 Z"/>
                            <path d="M480,200 L520,190 L560,210 L580,260 L570,320 L540,360 L500,360 L470,320 L460,260 Z"/>
                            <path d="M600,80 L700,70 L780,90 L820,130 L800,180 L760,200 L700,190 L640,160 L610,120 Z"/>
                            <path d="M750,320 L800,310 L840,330 L850,360 L830,390 L790,400 L750,390 L730,360 Z"/>
                        </svg>
                        
                        <div class="radar-ping" x-show="!supplierResult">
                            <div class="radar-circle"></div>
                            <div class="radar-circle"></div>
                            <div class="radar-circle"></div>
                        </div>
                        
                        <div class="supplier-pin" x-show="supplierResult">
                            <div class="pin-icon">üìç</div>
                        </div>
                        
                        <div class="supplier-card" x-show="supplierResult">
                            <div class="supplier-card-header">Match Found</div>
                            <div class="supplier-detail">
                                <span class="supplier-label">Part</span>
                                <span class="supplier-value" x-text="supplierResult ? supplierResult.part : ''"></span>
                            </div>
                            <div class="supplier-detail">
                                <span class="supplier-label">Supplier</span>
                                <span class="supplier-value" x-text="supplierResult ? supplierResult.supplier : ''"></span>
                            </div>
                            <div class="supplier-detail">
                                <span class="supplier-label">Confidence</span>
                                <span class="supplier-value confidence-high" x-text="supplierResult ? supplierResult.confidence : ''"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- ACT 4: ORDER ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
            <section class="act act-order" :class="{ 'active': step === 3 }" x-show="step === 3">
                <div class="receipt-card">
                    <div class="receipt-header">
                        <div class="receipt-checkmark">‚úì</div>
                        <div class="receipt-title">Order Placed</div>
                        <div class="receipt-subtitle">Autonomous procurement complete</div>
                    </div>
                    
                    <div class="receipt-details">
                        <div class="receipt-row">
                            <span class="receipt-label">Order ID</span>
                            <span class="receipt-value order-id" x-text="orderResult ? orderResult.orderId : ''"></span>
                        </div>
                        <div class="receipt-row">
                            <span class="receipt-label">Part</span>
                            <span class="receipt-value" x-text="supplierResult ? supplierResult.part : ''"></span>
                        </div>
                        <div class="receipt-row">
                            <span class="receipt-label">Supplier</span>
                            <span class="receipt-value" x-text="supplierResult ? supplierResult.supplier : ''"></span>
                        </div>
                        <div class="receipt-row">
                            <span class="receipt-label">Quantity</span>
                            <span class="receipt-value" x-text="visionResult ? visionResult.item_count : ''"></span>
                        </div>
                        <div class="receipt-row">
                            <span class="receipt-label">Confidence</span>
                            <span class="receipt-value confidence-high" x-text="visionResult ? visionResult.confidence : ''"></span>
                        </div>
                    </div>
                    
                    <div class="text-center">
                        <button @click="resetUpload()" class="btn btn-primary btn-lg">
                            Run Another Analysis
                        </button>
                    </div>
                </div>
            </section>
            
        </div> <!-- /main-glass-card -->
        
        <!-- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
             RIGHT PANELS (sticky sidebar)
             ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
        <div class="floating-panels-container">
            
            <!-- Results summary (persistent) -->
            <div class="results-summary-panel floating-status-card" x-show="visionResult !== null" x-transition>
                <h3 class="panel-title">Analysis Results</h3>
                <div class="summary-grid">
                    <div class="summary-item">
                        <div class="summary-icon">üì¶</div>
                        <div>
                            <div class="summary-label">Item Count</div>
                            <div class="summary-value" x-text="visionResult?.item_count || '0'"></div>
                        </div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-icon">üè∑Ô∏è</div>
                        <div>
                            <div class="summary-label">Item Type</div>
                            <div class="summary-value" x-text="visionResult?.item_type || 'N/A'"></div>
                        </div>
                    </div>
                    <div class="summary-item">
                        <div class="summary-icon">‚úì</div>
                        <div>
                            <div class="summary-label">Confidence</div>
                            <div class="summary-value" x-text="visionResult?.confidence || 'N/A'"></div>
                        </div>
                    </div>
                    <div class="summary-item" x-show="supplierResult">
                        <div class="summary-icon">üè≠</div>
                        <div>
                            <div class="summary-label">Supplier</div>
                            <div class="summary-value" style="font-size: 0.875rem;" x-text="supplierResult?.supplier || 'N/A'"></div>
                        </div>
                    </div>
                    <div class="summary-item" x-show="orderResult">
                        <div class="summary-icon">‚úÖ</div>
                        <div>
                            <div class="summary-label">Order ID</div>
                            <div class="summary-value" style="color: var(--green);" x-text="orderResult?.orderId || 'N/A'"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Code output -->
                <div class="execution-output-compact" x-show="executionOutput" style="margin-top: 0.75rem; padding-top: 0.75rem; border-top: 1px solid var(--surface-3);">
                    <div class="summary-label" style="margin-bottom: 0.5rem;">Code Output</div>
                    <pre x-text="executionOutput"></pre>
                </div>
            </div>
            
            <!-- Workflow progress -->
            <div class="workflow-panel floating-status-card" x-show="isProcessing || step > 0">
                
                <!-- Progress bar section -->
                <div class="progress-section" x-show="isProcessing">
                    <h3 class="panel-title">Analysis Progress</h3>
                    <div class="progress-bar-container">
                        <div class="progress-bar-fill" :style="`width: ${progressPercent}%`"></div>
                        <span class="progress-percent" x-text="`${progressPercent}%`"></span>
                    </div>
                    <div class="current-substep">
                        <div class="substep-icon">
                            <span x-show="progressPercent < 30">üß†</span>
                            <span x-show="progressPercent >= 30 && progressPercent < 50">üìù</span>
                            <span x-show="progressPercent >= 50">‚ö°</span>
                        </div>
                        <div class="substep-text" x-text="currentSubstep"></div>
                    </div>
                    <div class="code-gen-indicator" x-show="codeGenerating">
                        <div class="code-animation">
                            <div class="code-line"></div>
                            <div class="code-line"></div>
                            <div class="code-line"></div>
                        </div>
                        <span>Generating Python code‚Ä¶</span>
                    </div>
                    <div class="exec-indicator" x-show="codeExecuting">
                        <div class="terminal-animation">
                            <span class="terminal-prompt">$</span>
                            <span class="terminal-cursor"></span>
                        </div>
                        <span>Running detection‚Ä¶</span>
                    </div>
                    <div class="live-logs" x-show="liveLogStream.length > 0">
                        <template x-for="log in liveLogStream.slice(-3)" :key="log.time">
                            <div class="log-item">
                                <span class="log-time" x-text="log.time"></span>
                                <span class="log-msg" x-text="log.message"></span>
                            </div>
                        </template>
                    </div>
                </div>
                
                <!-- Workflow timeline -->
                <div class="progress-timeline">
                    <h3 class="panel-title">Workflow</h3>
                    <div class="timeline-steps">
                        <div class="timeline-step" :class="{'active': step >= 0, 'completed': step > 0}">
                            <div class="step-indicator"></div>
                            <span>Upload Image</span>
                        </div>
                        <div class="timeline-step" :class="{'active': step >= 1, 'completed': step > 1}">
                            <div class="step-indicator"></div>
                            <span>Vision Analysis</span>
                        </div>
                        <div class="timeline-step" :class="{'active': step >= 2, 'completed': step > 2}">
                            <div class="step-indicator"></div>
                            <span>Supplier Match</span>
                        </div>
                        <div class="timeline-step" :class="{'active': step >= 3, 'completed': step > 3}">
                            <div class="step-indicator"></div>
                            <span>Place Order</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Agent activity -->
            <div class="agent-panel floating-status-card tint-vision" x-show="isProcessing">
                <h3 class="panel-title">Agent Activity</h3>
                <div class="agent-activity">
                    <div class="activity-text" x-text="orchestratorText || 'System ready'"></div>
                    <div class="activity-indicator" x-show="isProcessing">
                        <div class="pulse-dot"></div>
                        <div class="pulse-dot"></div>
                        <div class="pulse-dot"></div>
                    </div>
                </div>
            </div>
            
            <!-- Code viewer -->
            <div class="code-viewer-section floating-status-card" x-show="generatedCode">
                <button class="panel-toggle" @click="showCode = !showCode">
                    <span x-text="showCode ? '‚ñæ' : '‚ñ∏'"></span>
                    Generated Code
                </button>
                <pre class="code-block" x-show="showCode" x-text="generatedCode"></pre>
            </div>
            
            <!-- Output viewer -->
            <div class="output-viewer-section floating-status-card" x-show="executionOutput">
                <button class="panel-toggle" @click="showOutput = !showOutput">
                    <span x-text="showOutput ? '‚ñæ' : '‚ñ∏'"></span>
                    Execution Output
                </button>
                <pre class="output-block" x-show="showOutput" x-text="executionOutput"></pre>
            </div>
            
        </div> <!-- /floating-panels-container -->
        
        <!-- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
             A2A AGENT DISCOVERY MODAL
             ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
        <div class="agent-discovery-modal" x-show="showAgentDiscovery" x-transition>
            <div class="discovery-backdrop" @click="showAgentDiscovery = false"></div>
            <div class="discovery-container">
                <div class="discovery-header">
                    <h3>Agent Discovery ¬∑ A2A</h3>
                    <button class="close-btn" @click="showAgentDiscovery = false">√ó</button>
                </div>
                
                <div class="agent-search-animation">
                    <div class="search-radar"></div>
                    <div class="search-pulse"></div>
                </div>
                
                <div class="agent-card" x-show="discoveredAgent" x-transition>
                    <div class="agent-icon">
                        <span x-show="discoveredAgent?.name === 'supplier'">üè≠</span>
                        <span x-show="discoveredAgent?.name === 'order'">üì¶</span>
                    </div>
                    <div class="agent-info">
                        <h4 x-text="discoveredAgent?.displayName"></h4>
                        <p x-text="discoveredAgent?.description"></p>
                        <div class="agent-meta">
                            <span class="meta-item">
                                <strong>Endpoint:</strong> <code x-text="discoveredAgent?.endpoint"></code>
                            </span>
                            <span class="meta-item">
                                <strong>Protocol:</strong> A2A v1.0
                            </span>
                            <span class="meta-item">
                                <strong>Capabilities:</strong> <span x-text="discoveredAgent?.capabilities"></span>
                            </span>
                        </div>
                    </div>
                    <div class="agent-status">
                        <div class="status-badge success">Connected</div>
                    </div>
                </div>
                
                <button class="connect-btn" x-show="discoveredAgent" @click="connectToAgent()">
                    Connect to Agent
                </button>
            </div>
        </div>
        
    </div> <!-- /app-container -->
    
    <script src="/static/app.js"></script>
    
</body>
</html>